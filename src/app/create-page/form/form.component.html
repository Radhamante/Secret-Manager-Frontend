<form
  (ngSubmit)="onSubmit()"
  [formGroup]="secretForm"
  card
>
  <h2 class="text-2xl font-bold mb-4">
    {{ "form.title" | transloco }}
  </h2>
  <p class="text-gray-600 mb-4">
    {{ "form.subtitle" | transloco }}
  </p>

  <div class="mb-4">
    <app-input [label]="'form.labels.content' | transloco">
      <textarea
        formControlName="content"
        [class.border-red-500]="
          secretForm.get('content')?.invalid && secretFormSubmited
        "
        class="border border-gray-300 rounded-md w-full px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-200"
        rows="5"
      ></textarea>
    </app-input>
    <app-input [label]="'form.labels.password' | transloco">
      <input
        type="password"
        [class.border-red-500]="
          secretForm.get('password')?.invalid && secretFormSubmited
        "
        formControlName="password"
        class="border border-gray-300 rounded-md w-full px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-200"
      />
    </app-input>
    <app-input [label]="'form.labels.lifetime' | transloco"
      ><input
        type="number"
        [class.border-red-500]="secretForm.errors && secretFormSubmited"
        formControlName="lifetime"
        class="flex-2 border border-gray-300 rounded-md w-full px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-200"
        min="0"
        value="0"
      />
      <select
        formControlName="lifetimeType"
        [class.border-red-500]="secretForm.errors && secretFormSubmited"
        class="flex-1 border border-gray-300 rounded-md w-full px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-200"
      >
        @for(lifetimetype of SecretLifetimeType | keyvalue; track
        lifetimetype.key) {
        <option [value]="lifetimetype.value">
          {{
            "form.labels.lifetimeTypes." + (lifetimetype.key | lowercase)
              | transloco
          }}
        </option>
        }
      </select>
    </app-input>
    <app-input [label]="'form.labels.usageLimit' | transloco">
      <input
        type="number"
        [class.border-red-500]="secretForm.errors && secretFormSubmited"
        formControlName="usageLimit"
        class="border border-gray-300 rounded-md w-full px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-200"
      />
    </app-input>
  </div>

  <button gradient class="relative w-full">
    @if(isLoading){
    <div
      role="status"
      class="absolute inset-0 flex items-center justify-center"
    >
      <app-spinner></app-spinner>
    </div>
    }
    <p [class.scale-0]="isLoading">
      {{ "form.labels.submit" | transloco }}
    </p>
  </button>
</form>
